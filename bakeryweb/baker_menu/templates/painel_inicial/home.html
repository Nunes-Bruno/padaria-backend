<!DOCTYPE html>
<html lang="en">
  <style>
    /* Estilos CSS */
    .float-btn {
      position: fixed; /* Posicionamento fixo na tela */
      bottom: 20px; /* Distância da parte inferior */
      right: 20px; /* Distância da parte direita */
      background-color: #007bff; /* Cor do botão */
      color: #fff; /* Cor do texto */
      border: none;
      border-radius: 14px; /* Botão com formato circular */
      width: 100px; /* Largura do botão */
      height: 50px; /* Altura do botão */
      font-size: 18px;
      cursor: pointer;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2); /* Sombra */
    }
  </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="https://www.svgrepo.com/show/475181/bread.svg">

</head>
<body>
  <div class="container">
    <div class="row" >
      <div class="col-md-12" style="background-color:rgb(245, 236, 112)">
        <header>
          <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
              <img src="https://www.svgrepo.com/show/475181/bread.svg" width="32px" alt="logo padaria">
              <a class="navbar-brand" href="#">Pãozinho de Ouro</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'cadastro' %}">Cadastro</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'pedidos' %}">Pedidos</a>
                  </li>
              </div>
            </div>
          </nav>
        </header>
      
    </div>
    </div>
    <div class="row" style="padding: 12px;">
        <div class="col-md-4" style="display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/bcvNO" class="card-img-top" alt="Pão Frances">
            <div class="card-body">
              <h5 class="card-title">Pão Frances</h5>
              <p class="card-text">Deliciosos Pães Franceses, sempre quentinhos.</p>
              <a href="#" id="pao-frances" class="btn btn-primary" data-nome="Pão Francês">Adicionar</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" style=" display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/cKM38" class="card-img-top" alt="Pão de Queijo">
            <div class="card-body">
              <h5 class="card-title">Pão de Queijo</h5>
              <p class="card-text">Delicioso Pão de queijo. Do forno direto para sua mesa.</p>
              <a href="#"  id="pao-de-queijo" class="btn btn-primary" data-nome="Pão de queijo">Adicionar</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" style=" display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/ghNZ8" class="card-img-top" alt="Bolo de Chocolate">
            <div class="card-body">
              <h5 class="card-title">Bolo de Chocolate</h5>
              <p class="card-text">Delicioso Bolo de chocolate.</p>
              <a href="#" id="bolo-chocolate" class="btn btn-primary" data-nome="Bolo de Chocolate">Adicionar</a>
            </div>
          </div>
        </div>
    </div>
    <div class="row" style="padding: 12px;">
        <div class="col-md-4" style=" display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/pwQSU" class="card-img-top" alt="Pizza">
            <div class="card-body">
              <h5 class="card-title">Pizza</h5>
              <p class="card-text">Deliciosa Pizza.</p>
              <a href="#" id="pizza" class="btn btn-primary" data-nome="Pizza">Adicionar</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" style=" display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/fmrTX" class="card-img-top" alt="pudim">
            <div class="card-body">
              <h5 class="card-title">Pudim</h5>
              <p class="card-text">Delicioso Pudim.</p>
              <a href="#" id="pudim" class="btn btn-primary" data-nome="Pudim">Adicionar</a>
            </div>
          </div>
        </div>
        <div class="col-md-4" style=" display: flex; justify-content: center;">
          <div class="card" style="width: 18rem;">
            <img src="https://shorturl.at/cxBQZ" class="card-img-top" alt="Cupcake">
            <div class="card-body">
              <h5 class="card-title">Cupcake</h5>
              <p class="card-text">Deliciosos Cupcakes.</p>
              <a href="#" id="cupcake" class="btn btn-primary" data-nome="Cupcake">Adicionar</a>
            </div>
          </div>
        </div>
    </div>
    <button class="float-btn" id="finalizar-compra">Comprar</button>
</div>

<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script> -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
{% csrf_token %}
<script>
  var csrftoken = $("[name=csrfmiddlewaretoken]").val()
  var lista_compras = []
  $(document).ready(function(){
    var pao_frances = $("#pao-frances")
    // var pao = $("#pao-frances").data('nome')
    
    $("#pao-frances").click(function(){
      console.log("Botão clicado!")
      $("#pao-frances").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#pao-frances").data('nome'))
      console.log(lista_compras)
    })

    $("#pao-de-queijo").click(function(){
      // var pao_queijo = $("#pao-de-queijo").data('nome')
      console.log("Botão clicado!")
      $("#pao-de-queijo").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#pao-de-queijo").data('nome'))
      console.log(lista_compras)
    })

    $("#bolo-chocolate").click(function(){
      console.log("Botão clicado!")
      $("#bolo-chocolate").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#bolo-chocolate").data('nome'))
      console.log(lista_compras)
    })

    $("#pizza").click(function(){
      console.log("Botão clicado!")
      $("#pizza").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#pizza").data('nome'))
      console.log(lista_compras)
    })

    $("#pudim").click(function(){
      console.log("Botão clicado!")
      $("#pudim").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#pudim").data('nome'))
      console.log(lista_compras)
    })

    $("#cupcake").click(function(){
      console.log("Botão clicado!")
      $("#cupcake").toggleClass("btn btn-primary btn btn-secondary")
      lista_compras.push($("#cupcake").data('nome'))
      console.log(lista_compras)
    })

    $("#finalizar-compra").click(function(){
      console.log("Compra realizada!")
      
      $.ajax({
      url: "/",
      type: "POST",
      headers: { "X-CSRFToken": csrftoken },
      data: {item: lista_compras},
      success: function(response){
        console.log("Ação realizada no Django!");
        $("#finalizar-compra").toggleClass("btn btn-primary btn btn btn-success")
        $("#finalizar-compra").text('Comprado')


        $("#pao-frances").removeClass("btn-secondary").addClass("btn-primary");
        $("#pao-de-queijo").removeClass("btn-secondary").addClass("btn-primary");
        $("#bolo-chocolate").removeClass("btn-secondary").addClass("btn-primary");
        $("#pizza").removeClass("btn-secondary").addClass("btn-primary");
        $("#pudim").removeClass("btn-secondary").addClass("btn-primary");
        $("#cupcake").removeClass("btn-secondary").addClass("btn-primary")
      },
      error: function(error){
        console.log("Erro ao chamar a view no Django!");
      }
    })

    })
  })

</script>

</body>
</html>